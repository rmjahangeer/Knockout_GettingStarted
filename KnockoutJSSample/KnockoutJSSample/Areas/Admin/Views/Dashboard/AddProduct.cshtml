
@{
    ViewBag.Title = "AddProduct";
}

<h2>Add Product</h2>
<small><a href="@Url.Action("Products")">All Products</a></small>

@section scripts
{
    <script>
        window.view = 'Create';
        window.productId = parseInt('@(ViewBag.id ?? 0)');
        window.editMode = window.productId ? true : false;
        window.redirectUrl = '@Url.Action("Products")';
    </script>
    <script src="~/App_Scripts/products.create.js" type="text/javascript"></script>
}

<form class="form-horizontal" data-bind="submit : save, with : product">
    <div class="form-group">
        <label>Product Name <span data-bind="if : Name">(<span data-bind="text : Name"> - <span data-bind="text : CategoryId"></span></span>)</span></label>
        <input type="text" class="form-control" data-bind="textInput : Name" />
    </div>
    
    <div class="form-group">
        <label>Price</label>
        <input type="number" min="1" class="form-control" data-bind="textInput : Price" />
    </div>
    <div class="form-group">
        <label>Category</label>
        <select data-bind="options: $root.categoriesList, optionsValue: 'id', optionsText: 'text', value: CategoryId, select2: {placeholder: 'Select a category', allowClear: true }" style="width: 150px"></select>
    </div>
    
    <div class="form-group">
        <button class="btn btn-success" data-bind="enable : $root.isFormValid">Save</button>
    </div>
</form>