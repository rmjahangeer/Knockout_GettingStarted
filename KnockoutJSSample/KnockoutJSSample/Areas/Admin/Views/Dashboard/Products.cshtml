
@{
    ViewBag.Title = "Products";
}

<h2>Products - (<span data-bind="text:products().length"></span>)</h2>
<small><a href="@Url.Action("AddProduct")">Add new</a></small>
@*<div data-bind="if: loadingData()">list</div>*@
@section scripts
{
    <script>
        window.view = 'Index';
    </script>
    <script src="~/App_Scripts/products.js" type="text/javascript"></script>
}

<div class="well well-lg">
    <div class="col-md-12">
        <div class="form-group">
            <input type="text" placeholder="Type to filter products" class="form-control" data-bind="textInput : filter" />
        </div>
    </div>
    <table class="table table-hover table-responsive">
        <thead>
            <tr>
                <th class="sortable" data-bind="click : sort.bind($data, 'id', sortParams())">
                    Id
                    <i data-bind="visible : (sortParams().sort() == 'id' && !sortParams().asc())" class="glyphicon glyphicon-arrow-down text-primary"></i>
                    <i data-bind="visible : sortParams().sort() == 'id' && sortParams().asc()"    class="glyphicon glyphicon-arrow-up text-primary"></i>
                </th>
                <th>
                    Image
                </th>
                <th class="sortable" data-bind="click : sort.bind($data, 'name', sortParams())">
                    Name 
                    <i data-bind="visible : (sortParams().sort() == 'name' && !sortParams().asc())" class="glyphicon glyphicon-arrow-down text-primary"></i>
                    <i data-bind="visible : sortParams().sort() == 'name' && sortParams().asc()"    class="glyphicon glyphicon-arrow-up text-primary"></i>
                </th>
                <th class="sortable" data-bind="click : sort.bind($data, 'price', sortParams())">
                    Price 
                    <i data-bind="visible : (sortParams().sort() == 'price' && !sortParams().asc())" class="glyphicon glyphicon-arrow-down text-primary"></i>
                    <i data-bind="visible : sortParams().sort() == 'price' && sortParams().asc()"    class="glyphicon glyphicon-arrow-up text-primary"></i>
                </th>
                <th class="sortable" data-bind="click : sort.bind($data, 'category', sortParams())">
                    Category 
                    <i data-bind="visible : (sortParams().sort() == 'category' && !sortParams().asc())" class="glyphicon glyphicon-arrow-down text-primary"></i>
                    <i data-bind="visible : sortParams().sort() == 'category' && sortParams().asc()"    class="glyphicon glyphicon-arrow-up text-primary"></i>
                </th>
                <th>Action</th>
            </tr>
        </thead>

        <tbody data-bind="foreach : products">
            <tr>
                <td><a data-bind="attr : { href : '@Url.Action("AddProduct")/' + Id, title : 'Edit ' + Name }, text : Id"></a></td>
                <td><img class="img-responsive img-circle" style="height: 48px" data-bind="attr :{src : Image}"/></td>
                <td data-bind="text : Name"></td>
                <td data-bind="text : Price"></td>
                <td data-bind="text : Category.Name"></td>
                <td>
                    <button class="btn btn-group-sm btn-danger" data-bind="click : removeProduct">
                        <i class="glyphicon glyphicon-trash"></i>
                    </button>
                </td>
            </tr>
        </tbody>
        <tbody data-bind="if : products().length == 0">
            <tr>
                <td class="text-center" colspan="4">No data found !</td>
            </tr>
        </tbody>
    </table>
</div>



